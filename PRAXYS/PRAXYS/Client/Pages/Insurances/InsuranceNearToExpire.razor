@inherits InsuranceNearToExpireBase
@page  "/insurance/near"

<div class="row">
<div class="col-12 d-flex justify-content-between align-items-center">
    <h4 class="mat-h4">Todas las polizas proximas a vencer</h4>
    <a class="btn btn-blue waves-effect waves-light" href="insurance">
        <span class="btn-label">
            <i class="fas fa-plus"></i>
        </span>
        Agregar Poliza
    </a>
</div>
</div>

@if (InsuranceList != null)
{
    <MatAccordion>
        <MatExpansionPanel Expanded="true">
            <MatExpansionPanelSummary Class="border-bottom bg-ligth">
                <MatExpansionPanelHeader>Filtrar Polizas</MatExpansionPanelHeader>
            </MatExpansionPanelSummary>
            <MatExpansionPanelDetails>
                <div class="row">
                    @if (InsuranceFilter != null)
                    {
                        <div class="form-group col-3">
                            <MatSelect Label="Rango de Fechas" @bind-Value="DateRange" Style="width:100%" Enhanced="true">
                                <MatOption Value="MES">Mes siguiente</MatOption>
                                <MatOption Value="TRIMESTRE">Proximos 3 meses</MatOption>
                                <MatOption Value="SEMESTRE">Proximos 6 meses</MatOption>
                                <MatOption Value="ANUAL">Proximo Año</MatOption>
                            </MatSelect>
                        </div>
                        <div class="form-group col-3">
                            <MatDatePicker Style="width:100%;"
                                           Label="Fecha de Inicial"
                                           @bind-Value="@InsuranceFilter.InitalDate">
                            </MatDatePicker>
                        </div>
                        <div class="form-group col-3">
                            <MatDatePicker Style="width:100%;"
                                           Label="Fecha Final"
                                           @bind-Value="@InsuranceFilter.FinalDate">
                            </MatDatePicker>
                        </div>
                    }
                </div>
            </MatExpansionPanelDetails>
        </MatExpansionPanel>
    </MatAccordion>
}

<div class="card mat-elevation-z4 border-top border-blue">
    <div class="card-body">
        <div class="row">
            <div class="col-12">
                @if (InsuranceList != null)
                {
                    <ListInsurance Insurances="InsuranceList" />
                }
                else
                {
                    <div class="d-flex justify-content-center">
                        <div class="spinner-grow avatar-lg text-secondary m-2 text-center" role="status"></div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
